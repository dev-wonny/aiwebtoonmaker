<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<script>
	const socket = new SockJS("/ws-chat");
	const stompClient = Stomp.over(socket);

	stompClient.connect({}, () => {
		console.log("Connected");

		// κµ¬λ…: μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ λ©”μ‹μ§€
		stompClient.subscribe("/topic/chatroom/" + roomId, (message) => {
			const payload = JSON.parse(message.body);
			console.log("π“¨", payload);
		});

		// μ „μ†΅: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„
		stompClient.send("/pub/chat/send", {}, JSON.stringify({
			chatRoomId: roomId,
			senderId: "{userId}",
			content: "Hello!",
			messageType: "TALK"
		}));
	});
</script>
